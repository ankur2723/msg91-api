function validateMobileNos(t){if(null==t||""==t)throw new Error("MSG91 : Mobile No is not provided.");return t=t instanceof Array?t.join(","):t}function validateTemplate(t){if(null==t||""==t)throw new Error("MSG91 : template id is not provided.");return t}function modifyCallbackIfNull(t){return t||function(){}}function isData(t){return t?"object"==typeof t?JSON.stringify(t):t:null}function makeHttpRequest(t,e,n){var o=require("https"),a="",t=o.request(t,function(t){t.setEncoding("utf8"),t.on("data",function(t){a+=t}),t.on("end",function(){a=JSON.parse(a),n(null,a)})});t.on("error",function(t){n(t)}),null!=e&&t.write(e),t.end()}module.exports=function(a){if(null==a||""==a)throw new Error("MSG91 Authorization Key not provided.");return this.sendSMS=function(t,e,n){n=modifyCallbackIfNull(n),t=validateMobileNos(t),e=isData(e),makeHttpRequest({method:"POST",hostname:"api.msg91.com",port:null,path:"/api/v5/flow/",headers:{"Content-Type":"application/JSON",authkey:a}},e,function(t,e){n(t,e)})},this.sendOTP=function(t,e,n,o){o=modifyCallbackIfNull(o),t=validateMobileNos(t),e=validateTemplate(e),n=isData(n),makeHttpRequest({method:"GET",hostname:"api.msg91.com",port:null,path:"/api/v5/otp?"+("template_id="+e+"&mobile="+t+"&authkey="+a),headers:{"Content-Type":"application/JSON"}},n,function(t,e){o(t,e)})},this.verifyOTP=function(t,n){n=modifyCallbackIfNull(n),makeHttpRequest({method:"GET",hostname:"api.msg91.com",port:null,path:"/api/v5/otp/verify?"+("mobile="+(t=validateMobileNos(t))+"&authkey="+a),headers:{}},function(t,e){n(t,e)})},this.resendOTP=function(t,e,n){2==arguments.length&&(n=e,e=null),n=modifyCallbackIfNull(n),t=validateMobileNos(t);var o="authkey="+a+"&mobile="+t;e&&(o+="&retrytype="+e),makeHttpRequest({method:"GET",hostname:"api.msg91.com",port:null,path:"/api/v5/otp/retry?"+o,headers:{}},function(t,e){n(t,e)})},this.getBalance=function(t,n){1==arguments.length&&(n=t,t=null),n=modifyCallbackIfNull(n),makeHttpRequest({method:"GET",port:null,hostname:"api.msg91.com",path:"/api/balance.php?"+("authkey="+a+"&type="+(t||1)),headers:{}},null,function(t,e){n(t,e)})},this};